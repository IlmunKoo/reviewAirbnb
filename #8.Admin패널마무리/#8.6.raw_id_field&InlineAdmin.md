# 8.6 raw_ids and Inline Admin

## 학습목표

### 1. raw field

### 2. inline admins

## 1. raw id field

user수가 적을 때는 user를 선택할 수 있겠지만,
user가 많아지면 리스트가 커지게 되고, 선택을 일일히 할 수 없을 때가 오게 될 것이다.
raw_id_fields는 그럴 때 사용하면 좋다.

rooms의 admin.py에 추가

```python
@admin.register(models.Room)
class RoomAdmin(admin.ModelAdmin):
    raw_id_fields = ("host",)
```

내가 가진 foreign key의 db 내용이 많아질 경우
이를 좀 더 효과적으로 볼 수 있게 해 준다.

user admin을 이용해서 호스트를 검색/필터링할 수 있게 해줌

## 2. inline models

> room admin에서 사진 만들어 내는 방법  
> room은 사진 세트를 가지고 있다.  
> photos에 가서 photo 추가하고 객실 골라 사진 추가하는 것은 번거로울 수 있다.  
> 이럴 때,  
> inline models를 써서 room admin에서 바로 추가할 수 있는 방법이 있다.  
> admin 안에 또다른 admin을 넣는 방법

두 개의 다른 admin이 있음  
하나를 다른 하나에 넣으면 됨

rooms의 admin.py에 클래스를 넣는다

### (1) PhotoInline클래스 추가

```python

class PhotoInline(admin.TabularInline):
    model = models.Photo

# room에서 사진추가하고 싶으므로 RoomAdmin에 추가
```

### (2) class RoomAdmin(admin.ModelAdmin):에 추가해줌

```python
      inlines = (PhotoInline, )


@admin.register(models.Room)
class RoomAdmin(admin.ModelAdmin):

    """ Room Admin Definition """
    inlines = [
        PhotoInline,
    ]
```

->장고는 자동으로 이 room의 foregin key를 가지고 있는 이미지를 집어넣는다.
Photo의 relationship name이 room이고 클래스 이름이 Room이기 때문에 장고는 내가 뭘 말하는지 자동으로 안다!

```python
class Photo(core_models.TimeStampedModel):

   """ Photo Model Definition """

   caption = models.CharField(max_length=80)
   file = models.ImageField(upload_to="room_photos")
   room = models.ForeignKey("Room", related_name="photos", on_delete=models.CASCADE)

   def __str__(self):
       return self.caption
```

room을 고르지 않고 caption이나 file만을 사용할 수 있다.
delete도 사용가능

장고는 이 foregin key가 여기 room들이랑 연결된 것을 알 수 있음

TabularInline뿐 아니라 StackedInline이라는 것도 있다.
보이는 모습이

이것이 가능한 이유는 foregin key 덕분이다.
장고는 여기 model이 room을 가리키는 것을 알 수 있기 때문이다.
이를 통해 장고는 model과 room의 관계를 알아차릴 수 있다.
